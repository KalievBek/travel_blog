{% extends 'blog/base.html' %}
{% load static %}
{% load i18n %}

{% block title %}{{ post.title }} ‚Äî {% trans "–ë–ª–æ–≥ –æ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è—Ö" %}{% endblock %}

{% block content %}
<div class="container">
    <article class="post-detail">
        <h2>{{ post.title }}</h2>
        <div class="post-meta">
            <p><strong>{% trans "–ê–≤—Ç–æ—Ä –ø–æ—Å—Ç–∞" %}:</strong> {{ post.author }}</p>
            <p><strong>{% trans "–ö–∞—Ç–µ–≥–æ—Ä–∏—è" %}:</strong> {{ post.category.name }}</p>
            <p><strong>{% trans "–°—Ç—Ä–∞–Ω–∞" %}:</strong> {{ post.country }}</p>
            <p><strong>{% trans "–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ" %}:</strong> {{ post.created_at|date:"d.m.Y H:i" }}</p>
        </div>

        {% if post.image %}
            <img src="{{ post.image.url }}" alt="{{ post.title }}" class="post-detail-image">
        {% endif %}

        <div class="post-content">
            {{ post.content|linebreaks }}
        </div>
    </article>

    <hr>

    <section class="comments-section">
        <h3>üí¨ {% trans "–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏" %}:</h3>
        {% for comment in comments %}
            <div class="comment-card">
                <div class="avatar">
                    <span>{{ comment.author|slice:":1"|upper }}</span>
                </div>
                <div class="comment-body">
                    <p class="comment-author">
                        <strong>{{ comment.author }}</strong>
                        <small class="text-muted">({{ comment.created_at|date:"d.m.Y H:i" }})</small>
                    </p>
                    <p class="comment-text">{{ comment.text }}</p>
                </div>
            </div>
        {% empty %}
            <p class="no-comments">{% trans "–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –ø–æ–∫–∞ –Ω–µ—Ç. –ë—É–¥—å—Ç–µ –ø–µ—Ä–≤—ã–º!" %}</p>
        {% endfor %}

        <hr>

        <div class="comment-form-section">
            <h4>{% trans "–û—Å—Ç–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π" %}</h4>
            <form method="post" class="comment-form">
                {% csrf_token %}

                <div class="form-group">
                    {{ form.author.label_tag }}
                    {{ form.author }}
                    {% for error in form.author.errors %}
                        <div class="error-message">{{ error }}</div>
                    {% endfor %}
                </div>

                <div class="form-group">
                    {{ form.text.label_tag }}
                    {{ form.text }}
                    {% for error in form.text.errors %}
                        <div class="error-message">{{ error }}</div>
                    {% endfor %}
                </div>

                <button type="submit" class="btn-primary">{% trans "–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π" %}</button>
            </form>
        </div>
    </section>
</div>
{% endblock %}